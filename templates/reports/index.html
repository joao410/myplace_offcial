{% extends 'base.html' %}
{% load static %}
{% block content %}

<svg class="Linha_1" viewBox="0 0 1482 1">
  <path id="Linha_1" d="M 0 0 L 1482 0">
  </path>
</svg>


<div class="" style="top:1;left: 300px;" id="Atendimento_ba">
  <span>Relatorios</span>
</div>


<main style="left:100px;" role="main"  class="col-md-6 m-sm-auto col-lg-9 mb-5"  >
    <div style="top:150px;left:0px;"  class="container  mb-5">
        {% include 'partials/_messages.html' %}
        <div class="p-4 shadow">
                    <!--Gerar Relatorio RH-->
                <div  class="row d-flex justify-content-center text-white bg-primary rounded p-2 mb-2"  >
                    Relatorio RH
                </div>   

                <form class="mb-2" action="{% url 'report_rh' %}" method="post" enctype="multipart/form-data" >
                    {% csrf_token %}
                    
                    <button  class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"  onclick="sendInfo()" type="submit" >
                        <i class="fas fa-download fa-sm text-white-50"></i>Gerar Relatorio
                    </button>

                </form>


                <!-- Tabela relatorios rh salvos -->
                <div class="bg-light p-3 " >
                    <div class="bg-white p-2 ">
                        <table id="table_report_rh" class="display table table-stripped table-hover ">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Arquivo</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for report_hrs in report_hr %}
                                <tr>
                                    <td>
                                        {{report_hrs.file_name}}   
                                    </td>
                                    <td>
                                        <a href="{{report_hrs.file.url}}"> <i class="uil-cloud-download"></i></a>
                                    </td>    
                                </tr>  
                                {% endfor %}  
                            </tbody>
                                
                        </table>
                    </div>
                </div>
        </div>


    </div>
</main>




{% block js %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
   var count = 0
    function sendInfo() {
        if (count == 0) {
            $.post(
                '/files',
                {
                    'csrfmiddlewaretoken': '{{csrf_token}}'
                }, function (data, success) {
                    console.log(data)
                }
            )
            count++
        }
    }
</script>

<script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
{% comment %} <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

<!-- Core plugin JavaScript-->
<script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}"></script>

<!-- Custom scripts for all pages-->
<script src="{% static 'js/sb-admin-2.min.js' %}"></script>

<!-- Page level plugins -->
<script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>

<!-- Page level custom scripts -->
<script src="{% static 'js/demo/chart-area-demo.js' %}"></script>
<script src="{% static 'js/demo/chart-pie-demo.js' %}"></script>  {% endcomment %}
<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/report_datatable.js' %}"></script>
{% endblock js %}



{% endblock content %}

