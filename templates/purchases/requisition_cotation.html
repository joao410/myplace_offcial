{% extends 'base.html' %}
{% load static %}
<!-- {% load my_tags %} -->
{% block content %}

{% if requisition.status == 'Aguardando cotação' %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div style="border:solid; border-color: #751FB1;" class=" row  text-dark  p-2 mb-3   fs-5  fw-bold  rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}} - {{requisition.status}} </span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 mr-3 rounded">Requisitante : </strong>
            <span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-6 bg-light "><strong style="border:solid; border-color: #751FB1;"class="text-dark p-2  mr-3 r rounded">Gestor : </strong>
           <span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong  style="border:solid; border-color: #751FB1;" class="text-dark p-2 mr-3 rounded">Status : </strong>
            <span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-6 bg-light "><strong style="border:solid; border-color: #751FB1;" class=" text-dark p-2 mr-3 rounded">Prazo de entrega esperado : </strong>
            <span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 mr-3 rounded">Responsavel pela compra: </strong>
            <span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-6 bg-light "><strong style="border:solid; border-color: #751FB1;"" class=" text-dark p-2 mr-3 rounded">Prazo de consumo estimado : </strong>
            <span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div style="border:solid; border-color: #751FB1;" class=" rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded">Cotações unitarias:</strong></div> 
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid; border-color: #751FB1;" class="text-dark p-2 rounded"> Editar</strong></div> 
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" class="d-flex justify-content-center" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold w-50 d-flex justify-content-center" >
                {% if product.cotations_length < 3 %}
                <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">
                <img  src="{% static 'img/add-button.png' %}" class="w-50"></a>
                {{product.cotations_length}}/3
                {% else %}
                <a href="#" data-bs-toggle="modal" data-bs-target="#viewcotationModal{{product.id}}">
                {{product.cotations_length}}/3
                </a>
                {% endif %}</span></div>   
                
                <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" >
                    <div class="dropdown">
                      <button class=" dropdown-toggle bg-white text-primary " type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="uil-edit"></i>
                      </button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item"  href="#" data-bs-toggle="modal" data-bs-target="#edit_first_cotationModal{{product.id}}">Primeira cotação</a>
                        <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#edit_second_cotationModal{{product.id}}">Segunda cotação</a>
                        <a class="dropdown-item"  href="#" data-bs-toggle="modal" data-bs-target="#edit_third_cotationModal{{product.id}}">Terceira cotação</a>
                      </div>
                    </div>
                  </span></div>    
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>

             <!--modal cotation  view -->
          <div class="modal fade" id="viewcotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">

                            <div class="carousel-item active">

                                        
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_cotation}}
                                        </div>
                                    </div>

                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_provider}}
                                        </div>
                                    </div>
                            </div>

                            <div class="carousel-item">
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_provider}}
                                    </div>
                                </div>


                            </div> 

                            <div class="carousel-item">

                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_provider}}
                                    </div>
                                </div>

                            </div>

                            <a class="carousel-control-prev " href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                              </a>

                              <a class="carousel-control-next " href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Proximo</span>
                              </a>

                        </div>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>

             <!--modal cotation  edit -->

        <div class="modal fade" id="edit_first_cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header bg-success">
                    <h5 class="modal-title text-white" id="staticBackdropLabel">primeira cotação</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form method="POST" action="#">
                      {% csrf_token %}
                    <div class="row border bg-light  rounded mb-2 p-2 ">
                      <div class="col">
                          VALOR:
                      </div>
                      <div class="col">
                      <input type="number" name="first_cotation" class="border p-2" value="{{product.first_cotation|floatformat}}"  placeholder="{{product.first_cotation}}" step=".01">    
                      </div>
                  </div>

                  <div class="row   border bg-light rounded mb-2 p-2 ">
                      <div class="col">
                          FORNECEDOR:
                      </div>
                      <div class="col">
                     <input type="text"  class="border p-2" name="first_provider" value='{{product.first_provider}}'>     
                      </div>
                  </div>


                  </div>
                  <div class="modal-footer">  
                      <button type="submit" class="btn btn-primary" name="edit_cotation1" value="{{product.id}}" >Editar</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                      </form> 
                  </div>
              </div>
            </div>
          </div>
   
    
          <div class="modal fade" id="edit_second_cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Segunda cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form method="POST" action="#">
                    {% csrf_token %}
                    <div class="row border bg-light  rounded mb-2 p-2 ">
                      <div class="col">
                          VALOR:
                      </div>
                      <div class="col">
                        <input type="number" name="second_cotation" value="{{product.second_cotation|floatformat}}"  class="border p-2" placeholder="{{product.second_cotation}}" step=".01">    
                      </div>
                  </div>

                  <div class="row   border bg-light rounded mb-2 p-2 ">
                      <div class="col">
                          FORNECEDOR:
                      </div>
                      <div class="col">
                    <input type="text"  class="border p-2" name="second_provider" value='{{product.second_provider}}'>     
                      </div>
                  </div>

                </div>
                <div class="modal-footer">  
                    <button type="submit" class="btn btn-primary" name="edit_cotation2" value="{{product.id}}" >Editar</button>
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    </form> 
                </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="edit_third_cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-success">
                <h5 class="modal-title text-white" id="staticBackdropLabel">Terceira cotação</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form method="POST" action="#">
                  {% csrf_token %}
                  <div class="row border bg-light  rounded mb-2 p-2 ">
                    <div class="col">
                        VALOR:
                    </div>
                    <div class="col">
                      <input type="number" value="{{product.third_cotation|floatformat}}" name="third_cotation" class="border p-2" placeholder="{{product.third_cotation}}"  step=".01">    
                    </div>
                </div>

                <div class="row   border bg-light rounded mb-2 p-2 ">
                    <div class="col">
                        FORNECEDOR:
                    </div>
                    <div class="col">
                      <input type="text"  class="border p-2" name="third_provider" value='{{product.third_provider}}'>     
                    </div>
                </div>

              </div>
              <div class="modal-footer">  
                  <button type="submit" class="btn btn-primary" name="edit_cotation3" value="{{product.id}}" >Editar</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                  </form> 
              </div>
          </div>
        </div>
      </div>                       


              <!--modal cotation -->
         <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                 <form method="POST" action="#">           
                  {% csrf_token %}
                    <div class="mb-2">
                    <label for="cotation">Valor:</label>
                    <input type="number" name="cotation" step=".01" class="form-control"/>
                    </div>
                    <div class="mb-2">
                        <label for="cotation">Fornecedor:</label>
                      
                        <input type="text" name="provider" class="form-control"/>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="submit"  name="btn_cotation" value="{{product.id }}" class="btn btn-primary">Salvar</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                  </form>     
              </div>
            </div>
          </div>
        </div>

            {% endfor %}    
            <div class="row ">
                <div class="mb-3 ">
                    <span style=" border: solid #751FB1;"  class="p-2">
                      Observação:
                    </span>
                </div>
                <div>
                    <textarea class="form-control w-50" name="note" rows="3" ></textarea>
                </div>
            </div>
            {% if requisition.cotation == False %}
            <div class="row  ">
              <form method="POST" action="#">           
                    {% csrf_token %}
                 <div class="d-flex justify-content-end mt-2">   
                <button type="button"  class="d-flex justify-content-center btn-dark p-2 rounded mr-1" data-bs-toggle="modal" data-bs-target="#returnCotation"> Devolver cotação</button>
                <button type="submit" class="btn btn-success" value="{{requisition.purchase_requisition_id}}" name="cot_conclude" >Concluir cotação</button>
                 </div>
              </form>
            </div>   
            {% endif %}

        </form>

    </div>
 
</main>
<!--modal return -->
<div class="modal fade" id="returnCotation" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Devolução</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form method="POST" action="#">
                {% csrf_token %}
            <div class="row ">
                <div class="mb-3 ">
                    <span style=" border: solid #751FB1;"  class="p-2">
                      Motivo:
                    </span>
                </div>
                <div>
                    <textarea class="form-control w-75" name="reason" rows="3" ></textarea>
                </div>
            </div>
      </div>
      <div class="modal-footer">    
        <button type="submit" class="btn btn-dark mr-1"  name="cot_return" >Devolver</button>    
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </form>
      </div>
    </div>
  </div>
</div>
{% elif requisition.status == 'Aguardando aprovação do(a) gestor(a) de compras'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div class=" row border border-warning  p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong class="border border-warning   p-2 mr-3 rounded">Requisitante : </strong>
           <span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-6 bg-light "><strong class="border border-warning   p-2 mr-3 rounded">Gestor : </strong>
          <span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong class="border border-warning   p-2 mr-1 rounded">Status : </strong>
            <span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-6 bg-light "><strong class="border border-warning   p-2 mr-2 rounded">Prazo de entrega esperado : </strong>
            <span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-6 bg-light "><strong class="border border-warning   p-2 mr-3 rounded">Responsavel pela compra: </strong>
           <span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-6 bg-light "><strong class="border border-warning   p-2  mr-3 rounded">Prazo de consumo estimado : </strong>
            <span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-warning   rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-warning   p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-warning   p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-warning   p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-warning   p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-warning   p-2 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-warning   p-2 rounded">Preço:</strong></div>
         
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
                {% if  requisition.status == "Aguardando aprovação do(a) gestor(a) de compras" %}    
          
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > 
                <select name="price_product{{product.id}}"  class="select-control   border rounded  w-100">
                    <option name="price_product" class="rounded " value="">
                        <option  class="rounded" value="{{product.first_cotation}}">{{product.first_cotation|floatformat}}</option>
                        <option  class="rounded" value="{{product.second_cotation}}">{{product.second_cotation|floatformat}}</option>
                        <option   class="rounded" value="{{product.third_cotation}}">{{product.third_cotation|floatformat}}</option>
                                      
                    </option>
                </select>
            </span></div>
           
            {% endif %}            
        </div>   
        
        
         <!--modal cotation -->
         <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-success">
                <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                      <div class="carousel-inner">

                          <div class="carousel-item active">

                                      
                                  <div class="row border bg-light  rounded mb-2 p-2 ">
                                      <div class="col">
                                          VALOR:
                                      </div>
                                      <div class="col">
                                          {{product.first_cotation}}
                                      </div>
                                  </div>

                                  <div class="row   border bg-light rounded mb-2 p-2 ">
                                      <div class="col">
                                          FORNECEDOR:
                                      </div>
                                      <div class="col">
                                          {{product.first_provider}}
                                      </div>
                                  </div>
                          </div>

                          <div class="carousel-item">
                              <div class="row border bg-light  rounded mb-2 p-2 ">
                                  <div class="col">
                                      VALOR:
                                  </div>
                                  <div class="col">
                                      {{product.second_cotation}}
                                  </div>
                              </div>

                              <div class="row   border bg-light rounded mb-2 p-2 ">
                                  <div class="col">
                                      FORNECEDOR:
                                  </div>
                                  <div class="col">
                                      {{product.second_provider}}
                                  </div>
                              </div>


                          </div> 

                          <div class="carousel-item">

                              <div class="row border bg-light  rounded mb-2 p-2 ">
                                  <div class="col">
                                      VALOR:
                                  </div>
                                  <div class="col">
                                      {{product.third_cotation}}
                                  </div>
                              </div>

                              <div class="row   border bg-light rounded mb-2 p-2 ">
                                  <div class="col">
                                      FORNECEDOR:
                                  </div>
                                  <div class="col">
                                      {{product.third_provider}}
                                  </div>
                              </div>

                          </div>

                          <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="sr-only">Anterior</span>
                            </a>

                            <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="sr-only">Proximo</span>
                            </a>

                      </div>
                  </div>
              </div>
            <div class="modal-footer">  
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
          </div>
        </div>
      </div>

         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
            
            {% endfor %}    
            <div class="row ">
                <div class="mb-3 ">
                    <span   class="border border-warning  p-2">
                  Observação:
                    </span>
                </div>
                <div>
                    <textarea class="form-control w-50" placeholder="{% firstof requisition.note %}"  rows="3" disabled ></textarea>
                </div>
            </div>
            {% if usuarioC.trabalho.cargo.cargo == 'GESTOR DE COMPRAS' %}
            <div class="row">
                <div class=" d-flex justify-content-end">
                <button type="submit" class="btn btn-success" value="{{requisition.purchase_requisition_id}}" name="cot_approved" >Aprovar cotação</button>     
                <button type="submit" class="btn btn-dark" value="{{requisition.purchase_requisition_id}}" name="cot_denied" >Negar cotação</button>
              </div>
            </div>   
            {% endif %}
        </form>

    </div>

</main>

{% elif requisition.status == 'Aguardando aprovação financeira'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div class=" row border border-info  p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong class="border border-info p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-info rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-info p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-info p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-info p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-info p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Preço do Produto:</strong></div>
           
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.price_product}}</span></div> 
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
              <!--modal cotation -->
              <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header bg-success">
                      <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
    
                                <div class="carousel-item active">
    
                                            
                                        <div class="row border bg-light  rounded mb-2 p-2 ">
                                            <div class="col">
                                                VALOR:
                                            </div>
                                            <div class="col">
                                                {{product.first_cotation}}
                                            </div>
                                        </div>
    
                                        <div class="row   border bg-light rounded mb-2 p-2 ">
                                            <div class="col">
                                                FORNECEDOR:
                                            </div>
                                            <div class="col">
                                                {{product.first_provider}}
                                            </div>
                                        </div>
                                </div>
    
                                <div class="carousel-item">
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.second_cotation}}
                                        </div>
                                    </div>
    
                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.second_provider}}
                                        </div>
                                    </div>
    
    
                                </div> 
    
                                <div class="carousel-item">
    
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.third_cotation}}
                                        </div>
                                    </div>
    
                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.third_provider}}
                                        </div>
                                    </div>
    
                                </div>
    
                                <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Anterior</span>
                                  </a>
    
                                  <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Proximo</span>
                                  </a>
    
                            </div>
                        </div>
                    </div>
                  <div class="modal-footer">  
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                  </div>
                </div>
              </div>
            </div>
    





           


            {% endfor %}    
            
        </form>

    </div>

</main>
{% elif requisition.status == 'aprovado'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
      <form method="POST" action="#" enctype="multipart/form-data" >
            {% csrf_token %}
        <div class=" row border border-success  p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong class="border border-success p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-success rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-success p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-success p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-success p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-success p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-success p-2 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-success p-2 rounded">Preço do Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-success p-2 rounded">Tipo de pagamento</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-success p-2 rounded">Boleto</strong></div>
             
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.price_product}}</span></div> 
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >
            <select name="type_product{{product.id}}" onchange="displayBlock('{{product.id}}')" id="select-boleto{{product.id}}"  class="select-control select-boleto{{product.id}}  border rounded  w-100">
              <option name="type_product{{product.id}}" class="rounded " value="">
                  <option  class="rounded" value="BOLETO" onclick="console.log('Clicado')">BOLETO</option>
                  <option  class="rounded" value="TRANSFRENCIA" onclick="toggleBoleto(false)">TRANSFRENCIA</option>
                  <option   class="rounded" value="PIX" onclick="toggleBoleto(false)">PIX</option>
                                
              </option>
          </select></span></span></div>
            <div  class="col bg-light d-flex justify-content-center" style="font-size: 10px;">              
              <input id="inputBoleto{{product.id}}" type="file"  class="form-control" style="display: none;" name="ticket{{product.id}}"></div>
                 
                
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
           <!--modal cotation -->
           <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
  
                            <div class="carousel-item active">
  
                                        
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_cotation}}
                                        </div>
                                    </div>
  
                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_provider}}
                                        </div>
                                    </div>
                            </div>
  
                            <div class="carousel-item">
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_cotation}}
                                    </div>
                                </div>
  
                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_provider}}
                                    </div>
                                </div>
  
  
                            </div> 
  
                            <div class="carousel-item">
  
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_cotation}}
                                    </div>
                                </div>
  
                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_provider}}
                                    </div>
                                </div>
  
                            </div>
  
                            <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                              </a>
  
                              <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Proximo</span>
                              </a>
  
                        </div>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>

    
            {% endfor %}    
          <button  type="submit" class="btn border-primary" name="btn_boungth">Concluir compra</button>
        </form>

    </div>

</main>

<script>
  function toggleBoleto(sts) {
    console.log(sts)
    // let elemento = $('#inputBoleto')
    // if (sts == true) {
    //   console.log(sts)
    //   if (elemento.hasClass('d-none') == true) {
    //     elemento.removeClass('d-none')
    //   }
    // }
    
    // if (sts == false) {
    //   console.log(sts)
    //     elemento.addClass('d-none')
    // }
  }

  function displayBlock (id){
    console.log(id)

    let inputs = document.querySelectorAll(`.select-boleto${id}`)
    
      if(document.querySelector(`.select-boleto${id}`).value === 'BOLETO'){
        document.querySelector(`#inputBoleto${id}`).style.display = 'flex'
    }
  }

</script>

{% elif requisition.status == 'negado'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div class=" row border border-danger  p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong class="border border-danger p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-danger rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-danger p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-danger p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-danger p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-danger p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-danger p-2 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-danger p-2 rounded">Preço do Produto:</strong></div>
            
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
                <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.price_product}}</span></div> 
                 
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
              <!--modal cotation -->
          <!--modal cotation -->
          <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">

                            <div class="carousel-item active">

                                        
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_cotation}}
                                        </div>
                                    </div>

                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_provider}}
                                        </div>
                                    </div>
                            </div>

                            <div class="carousel-item">
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_provider}}
                                    </div>
                                </div>


                            </div> 

                            <div class="carousel-item">

                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_provider}}
                                    </div>
                                </div>

                            </div>

                            <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                              </a>

                              <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Proximo</span>
                              </a>

                        </div>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>





           


            {% endfor %}    
            
        </form>

    </div>

</main>
{% elif requisition.status == 'Devolvida'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div style="border:solid #cccccc;" class=" row border   p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="border:solid #cccccc;" class=" p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span  class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong style="border:solid #cccccc;"class=" p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="border:solid #cccccc;" class=" p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong style="border:solid #cccccc;" class="p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="border:solid #cccccc;" class=" p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong  style="border:solid #cccccc;"class=" p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div style="border:solid #cccccc;" class="rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong style="border:solid #cccccc;" class=" p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong style="border:solid #cccccc;" class=" p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid #cccccc;" class=" p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid #cccccc;" class=" p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="border:solid #cccccc;" class=" p-2 rounded">Cotações unitarias:</strong></div>
   
            
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
            
                 
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
              <!--modal cotation -->
          <!--modal cotation -->
          <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">

                            <div class="carousel-item active">

                                        
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_cotation}}
                                        </div>
                                    </div>

                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_provider}}
                                        </div>
                                    </div>
                            </div>

                            <div class="carousel-item">
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_provider}}
                                    </div>
                                </div>


                            </div> 

                            <div class="carousel-item">

                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_provider}}
                                    </div>
                                </div>

                            </div>

                            <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                              </a>

                              <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Proximo</span>
                              </a>

                        </div>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>





           


            {% endfor %}    
            
        </form>

    </div>

</main>
{% elif requisition.status == 'Aguardando pagamento'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#" enctype="multipart/form-data" >
            {% csrf_token %}
        <div class=" row border-secondary  p-2 mb-3   fs-5  fw-bold  border rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light  border border p-3 rounded">
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light  border border p-3 rounded">
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light  border border p-3 rounded">
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong class=" border border-secondary  p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-secondary rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light  border border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class=" border border-secondary  p-1 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class=" border border-secondary  p-1 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-secondary  p-1 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-secondary  p-1 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-secondary p-2 rounded">Preço do Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-secondary  p-1 rounded">tipo de pagamento:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-secondary  p-1 rounded">Boleto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Comprovante de pagamento:</strong></div>
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light  border border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.price_product}}</span></div> 
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.type_of_payment|upper}}</span></div>
            {% if product.ticket %}
            <div class="col bg-light d-flex justify-content-center"><a href="{{product.ticket.url}}"> {{product.type_of_payment|upper}}</a></span></div>
            {% else %}
            <div class="col bg-light d-flex justify-content-center"></span></div>
            {% endif %}
            <div class="col-2 bg-light d-flex justify-content-center"><span class="fw-bold" > <input type="file" name="voucher{{product.id}}" class="form-control" required/></span></div>                            
         
         
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
              <!--modal cotation -->
              <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header bg-success">
                      <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
    
                                <div class="carousel-item active">
    
                                            
                                        <div class="row border bg-light  rounded mb-2 p-2 ">
                                            <div class="col">
                                                VALOR:
                                            </div>
                                            <div class="col">
                                                {{product.first_cotation}}
                                            </div>
                                        </div>
    
                                        <div class="row   border bg-light rounded mb-2 p-2 ">
                                            <div class="col">
                                                FORNECEDOR:
                                            </div>
                                            <div class="col">
                                                {{product.first_provider}}
                                            </div>
                                        </div>
                                </div>
    
                                <div class="carousel-item">
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.second_cotation}}
                                        </div>
                                    </div>
    
                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.second_provider}}
                                        </div>
                                    </div>
    
    
                                </div> 
    
                                <div class="carousel-item">
    
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.third_cotation}}
                                        </div>
                                    </div>
    
                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.third_provider}}
                                        </div>
                                    </div>
    
                                </div>
    
                                <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Anterior</span>
                                  </a>
    
                                  <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Proximo</span>
                                  </a>
    
                            </div>
                        </div>
                    </div>
                  <div class="modal-footer">  
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                  </div>
                </div>
              </div>
            </div>




           


            {% endfor %}    
            
         
            <div class="row ">
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-success" value="{{requisition.purchase_requisition_id}}" name="req_paid_out" >Concluir Pagamento</button>     
              </div>
            </div>   
          
        </form>

    </div>

</main>

{% elif requisition.status == 'Comprado'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
       

        <div class=" row border border-primary  p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>

        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>


        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong class="border border-primary p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div class=" border border-primary rounded p-2 mb-2 mt-2">
        </div>  

        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-primary p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong class="border border-primary p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-primary p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class="border border-primary p-2 rounded">Cotações unitarias:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Preço do Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Comprovante de pagamento:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Nota fiscal:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong class=" border border-info p-2 rounded">Produto entregue</strong></div>
  
           
        </div>
        {% for product in products %}


       
        <!-- lin-->

        <form method="POST" action="# " enctype="multipart/form-data">
          {% csrf_token %}
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>      
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >  <a href="#" data-bs-toggle="modal" data-bs-target="#cotationModal{{product.id}}">  {{product.cotations_length}}/3</span></a></span></div>
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.price_product}}</span></div> 
            {% if product.payment_voucher %}
            <div class="col bg-light d-flex justify-content-center"><a href="{{product.payment_voucher.url}}"><i class="uil-cloud-download"></i></a></span></div>
            {% else %}
            <div class="col bg-light d-flex justify-content-center"><i class="uil-cloud-download"></i></span></div>
            {% endif %}
            {% if product.invoice %}
            <div class="col bg-light d-flex justify-content-center"><a href="{{product.invoice.url}}"><i class="uil-cloud-download"></i></a></span></div>
            {% else %}
            <div class="col-2 bg-light d-flex justify-content-center"><span class="fw-bold" > <input type="file" name="invoice{{product.id}}" class="form-control" required/></span></div>                            
            {% endif %}
            {% if product.delivered == False %}
            <div class="col bg-light d-flex justify-content-center" ><button type="submit"  class="btn btn-success " value="{{product.id}}" name="prod_deliv" >OK</button> </div>    
            {% else %}
            <div class="col bg-light d-flex justify-content-center  " ><img style="width: 35px;" src="{% static 'img/check.png' %}">
             </div>    
            {% endif %}
        </div>

        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
             
          <!--modal cotation -->
          <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleControls{{product.id}}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">

                            <div class="carousel-item active">

                                        
                                    <div class="row border bg-light  rounded mb-2 p-2 ">
                                        <div class="col">
                                            VALOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_cotation}}
                                        </div>
                                    </div>

                                    <div class="row   border bg-light rounded mb-2 p-2 ">
                                        <div class="col">
                                            FORNECEDOR:
                                        </div>
                                        <div class="col">
                                            {{product.first_provider}}
                                        </div>
                                    </div>
                            </div>

                            <div class="carousel-item">
                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.second_provider}}
                                    </div>
                                </div>


                            </div> 

                            <div class="carousel-item">

                                <div class="row border bg-light  rounded mb-2 p-2 ">
                                    <div class="col">
                                        VALOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_cotation}}
                                    </div>
                                </div>

                                <div class="row   border bg-light rounded mb-2 p-2 ">
                                    <div class="col">
                                        FORNECEDOR:
                                    </div>
                                    <div class="col">
                                        {{product.third_provider}}
                                    </div>
                                </div>

                            </div>

                            <a class="carousel-control-prev bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                              </a>

                              <a class="carousel-control-next bg-success" href="#carouselExampleControls{{product.id}}" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Proximo</span>
                              </a>

                        </div>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>




           
      </form> 

            {% endfor %}   
         
          <form method="POST" action="#">
            {% csrf_token %}
            <div class="row ">
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-success" value="{{requisition.purchase_requisition_id}}" name="req_deliv" >Concluir entregua</button>     
              </div>
            </div>   
        </form>
      

    </div>

</main>
{% elif requisition.status == 'entregue'  %}
<main role="main"  class="col-md-6 col-sm-4 m-sm-auto m-xl-auto m-auto  m-lg-auto col-lg-8 
   justify-content-left pt-5"  >
    <div class="container bg-light mt-4   shadow p-3 ">
        <form method="POST" action="#">
            {% csrf_token %}
        <div style="background-color: #008000;" class=" row   p-2 mb-3   fs-5  fw-bold border-bottom rounded" >
            <div class="col-11 d-flex justify-content-center">
            <span>Requisição - {{requisition.purchase_requisition_id}} - {{products.0.requisition_product}}- {{requisition.status}}</span> 
            </div>  
            <div class="col-1  d-flex justify-content-end">
                <a href="{% url 'purchase_request' %}">
                    <img  id="" src="{% static 'img/close-button.png' %}" srcset="{% static 'img/close-button.png' %} 1x, {% static 'img/close-button@2x.png' %} 2x">
                </a>
            </div>   
        </div>
        
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class=" p-2 rounded">Requisitante : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.requester}}</span></div>
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class=" p-2 rounded">Gestor : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.manager}}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class="p-2 rounded">Status : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {{requisition.status|upper}}</span></div>
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class="p-2 rounded">Prazo de entrega esperado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof  requisition.deadline ""|upper %}</span></div>
        </div>
        <div class="row bg-light border p-3 rounded">
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class=" p-2 rounded">Responsavel pela compra: </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.buyer  ""|upper%}</span></div>
            <div class="col-3 bg-light "><strong style="background-color: #008000;"  class=" p-2 rounded">Prazo de consumo estimado : </strong></div>
            <div class="col-3 bg-light"><span class="fw-bold" > {% firstof requisition.forecast ""|upper %}</span></div>
        </div>
     
        <div  style="background-color: #008000;" class=" rounded p-2 mb-2 mt-2">
        </div>  
        <div class="row bg-light border p-3 rounded">
            <div class="col bg-light d-flex justify-content-center "><strong style="background-color: #008000;"  class=" p-2 rounded">Quantidade: </strong></div>
            <div class="col bg-light d-flex justify-content-center "><strong style="background-color: #008000;"  class=" p-2 rounded">Unidade: </strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="background-color: #008000;" class=" p-2 rounded">Produto:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="background-color: #008000;" class="p-2 rounded">Imagem:</strong></div>
            <div class="col bg-light  d-flex justify-content-center"><strong style="background-color: #008000;" class="p-2 rounded">Preço</strong></div>
            {% if  requisition.status == "Aguardando aprovação do(a) gestor(a) de compras" %}    
            <div class="col bg-light  d-flex justify-content-center"><strong class="bg-primary p-2 rounded">Preço:</strong></div>
            {% endif %}     
        </div>
        {% for product in products %}


       
        <!-- lin-->
        <div class="row bg-light border mb-3 p-3 rounded">
            <div class="col bg-light d-flex justify-content-center" ><span class="fw-bold" > {{product.amount}}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {% firstof product.unit  ""|upper%}</span></div>
            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold" > {{product.requisition_product|upper}}</span></div>

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold w-50" ><a href="#" data-bs-toggle="modal" data-bs-target="#imageModal{{product.id}}">
            {% Productimage  product.id as img %} <img src="{{img.image.url}}"class="w-50" ></a></span></div> 

            <div class="col bg-light d-flex justify-content-center"><span class="fw-bold p-2 " >{{product.price_product}} </span></div>

            
        </div>   
        
        


         <!--modal image -->
            <div class="modal fade" id="imageModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Imagem</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <img src="{{img.image.url}}"class="w-100" >
                  </div>
                  <div class="modal-footer">
                               
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              
                  </div>
                </div>
              </div>
            </div>
              <!--modal cotation -->
         <div class="modal fade" id="cotationModal{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header bg-success">
                  <h5 class="modal-title text-white" id="staticBackdropLabel">Cotação</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                 <form method="POST" action="#">           
                  {% csrf_token %}s
                    <div class="mb-2">
                    <label for="cotation">Valor:</label>
                    <input type="number" name="cotation" step=".01" class="form-control"/>
                    </div>
                    <div class="mb-2">
                        <label for="cotation">Fornecedor:</label>
                      
                        <input type="text" name="provider" class="form-control"/>
                    </div>
                </div>
              <div class="modal-footer">  
                    <button type="submit"  name="btn_cotation" value="{{product.id }}" class="btn btn-primary">Salvar</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                  </form>     
              </div>
            </div>
          </div>
        </div>





           


            {% endfor %}    
            
           
        </form>

    </div>

</main>
{% endif %}




{% endblock content %}